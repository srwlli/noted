{
  "title": "Phase 2: Expand Color System from 9 to 17 Colors",
  "status": "PLANNED",
  "date_created": "2025-09-30",
  "priority": "MEDIUM",
  "estimated_time": "3-4 hours",
  "depends_on": "Phase 1 complete (5 themes with 9 colors each)",

  "overview": {
    "goal": "Extend existing 9-color system to 17 colors for richer UI design without breaking changes",
    "approach": "Additive only - keep all existing colors, add 8 new color fields (hardcoded values)",
    "backward_compatibility": "100% - all existing components continue to work",
    "files_to_modify": [
      "constants/theme.ts (add 8 fields to ColorScheme interface, add 80 color values to all themes)",
      "CHANGELOG.md (document Phase 2 completion)"
    ]
  },

  "constraints": {
    "must_preserve": [
      "All 5 existing themes (greyscale, appleNotes, sepia, nord, bearRedGraphite)",
      "All 9 existing color fields in ColorScheme interface",
      "All theme metadata (displayName, description)",
      "ThemeController, ThemeStorage, theme picker modal - unchanged",
      "Existing components must work without modification"
    ],
    "must_not": [
      "Remove any existing color fields",
      "Rename any existing color fields",
      "Change values of existing colors",
      "Break TypeScript compilation",
      "Require changes to existing components to keep working"
    ],
    "validation": [
      "TypeScript compilation must pass (npx tsc --noEmit)",
      "All 5 themes must render correctly",
      "Existing app functionality must work unchanged",
      "Theme switching must work for all themes",
      "New colors should meet WCAG AA contrast standards (visual verification)"
    ]
  },

  "color_system_expansion": {
    "current_state": {
      "fields": 9,
      "colors_per_theme": "9 light + 9 dark = 18 total",
      "total_colors_defined": "5 themes × 18 = 90 color values"
    },
    "target_state": {
      "fields": 17,
      "colors_per_theme": "17 light + 17 dark = 34 total",
      "total_colors_defined": "5 themes × 34 = 170 color values",
      "new_colors_to_add": "5 themes × 16 (8 light + 8 dark) = 80 new color values"
    }
  },

  "new_color_fields": {
    "1_elevatedSurface": {
      "purpose": "Layered UI elements with depth (modals, popovers, elevated cards)",
      "usage": "Modal backgrounds, dropdown menus, cards on cards",
      "relationship": "Light mode: lighter than surface. Dark mode: lighter/more saturated than surface"
    },
    "2_overlay": {
      "purpose": "Semi-transparent overlays for modals and dialogs",
      "usage": "Modal backdrop, lightbox scrim, loading overlays",
      "format": "rgba(r, g, b, alpha)"
    },
    "3_hover": {
      "purpose": "Interactive hover states for buttons and list items",
      "usage": "Button hover, list item hover, card hover",
      "relationship": "Slightly lighter/darker than background or surface"
    },
    "4_pressed": {
      "purpose": "Active/pressed button states (more pronounced than hover)",
      "usage": "Button active state, pressed list items, toggle buttons",
      "relationship": "More pronounced than hover for clear tactile feedback"
    },
    "5_disabled": {
      "purpose": "Disabled UI elements (buttons, inputs, text)",
      "usage": "Disabled button background/text, inactive options",
      "relationship": "Reduced contrast to indicate non-interactive state"
    },
    "6_highlight": {
      "purpose": "Selected text, search results, notifications, badges",
      "usage": "Text selection, search highlight, notification dots, 'New' indicators",
      "relationship": "Bright, attention-grabbing, maintains readability"
    },
    "7_linkColor": {
      "purpose": "Hyperlinks (can be same as or distinct from tint)",
      "usage": "Clickable links in text, navigation links, inline content links",
      "relationship": "Often same as tint, but can differ (e.g., blue for links, gray tint)",
      "wcag_requirement": "Should meet 4.5:1 contrast against background"
    },
    "8_accentSecondary": {
      "purpose": "Secondary accent for variety without overwhelming",
      "usage": "Secondary buttons, alternative badges, supporting graphics",
      "relationship": "Harmonizes with tint, less saturated or different hue"
    }
  },

  "implementation_steps": {
    "step_1_update_colorscheme_interface": {
      "order": 1,
      "file": "constants/theme.ts",
      "line": 20,
      "task": "Expand ColorScheme interface from 9 to 17 fields",
      "before": "interface ColorScheme {\n  background: string;\n  surface: string;\n  text: string;\n  textSecondary: string;\n  border: string;\n  tint: string;\n  icon: string;\n  tabIconDefault: string;\n  tabIconSelected: string;\n}",
      "after": "interface ColorScheme {\n  // Original 9 fields (PRESERVED)\n  background: string;\n  surface: string;\n  text: string;\n  textSecondary: string;\n  border: string;\n  tint: string;\n  icon: string;\n  tabIconDefault: string;\n  tabIconSelected: string;\n  \n  // New 8 fields (ADDED)\n  elevatedSurface: string;\n  overlay: string;\n  hover: string;\n  pressed: string;\n  disabled: string;\n  highlight: string;\n  linkColor: string;\n  accentSecondary: string;\n}",
      "verification": "TypeScript shows errors on all 5 themes (expected - need to add colors)",
      "estimated_time": "5 minutes"
    },

    "step_2_add_colors_greyscale": {
      "order": 2,
      "file": "constants/theme.ts",
      "task": "Add 8 new colors to greyscale theme (light and dark)",
      "theme": "greyscale",
      "light_colors": {
        "elevatedSurface": "#f2f2f0",
        "overlay": "rgba(18, 18, 18, 0.5)",
        "hover": "#ececec",
        "pressed": "#e0e0e0",
        "disabled": "#bcbcbc",
        "highlight": "#ffeb3b",
        "linkColor": "#0066cc",
        "accentSecondary": "#6a6a6a"
      },
      "dark_colors": {
        "elevatedSurface": "#2a2a2a",
        "overlay": "rgba(0, 0, 0, 0.7)",
        "hover": "#1a1a1a",
        "pressed": "#0d0d0d",
        "disabled": "#666666",
        "highlight": "#ffeb3b",
        "linkColor": "#5eb3ff",
        "accentSecondary": "#b0b0b0"
      },
      "location": "After tabIconSelected in greyscale.light and greyscale.dark",
      "verification": "Greyscale theme compiles without errors",
      "estimated_time": "10 minutes"
    },

    "step_3_add_colors_appleNotes": {
      "order": 3,
      "file": "constants/theme.ts",
      "task": "Add 8 new colors to appleNotes theme (light and dark)",
      "theme": "appleNotes",
      "light_colors": {
        "elevatedSurface": "#ffffff",
        "overlay": "rgba(28, 28, 30, 0.4)",
        "hover": "#f5f3f0",
        "pressed": "#ebe9e6",
        "disabled": "#c7c7cc",
        "highlight": "#dbe9f5",
        "linkColor": "#007aff",
        "accentSecondary": "#5eb3ff"
      },
      "dark_colors": {
        "elevatedSurface": "#363638",
        "overlay": "rgba(0, 0, 0, 0.7)",
        "hover": "#2c2c2e",
        "pressed": "#1c1c1e",
        "disabled": "#636366",
        "highlight": "#4c566a",
        "linkColor": "#0a84ff",
        "accentSecondary": "#5eb3ff"
      },
      "verification": "appleNotes theme compiles without errors",
      "estimated_time": "10 minutes"
    },

    "step_4_add_colors_sepia": {
      "order": 4,
      "file": "constants/theme.ts",
      "task": "Add 8 new colors to sepia theme (light and dark)",
      "theme": "sepia",
      "light_colors": {
        "elevatedSurface": "#fdfcf7",
        "overlay": "rgba(26, 22, 18, 0.4)",
        "hover": "#ece6dc",
        "pressed": "#e0d7ca",
        "disabled": "#b8aea0",
        "highlight": "#fff3d6",
        "linkColor": "#8b6f47",
        "accentSecondary": "#c4a576"
      },
      "dark_colors": {
        "elevatedSurface": "#322a23",
        "overlay": "rgba(0, 0, 0, 0.7)",
        "hover": "#2f2924",
        "pressed": "#251f1a",
        "disabled": "#6b5f55",
        "highlight": "#3a322b",
        "linkColor": "#c4a576",
        "accentSecondary": "#9e8767"
      },
      "verification": "Sepia theme compiles without errors",
      "estimated_time": "10 minutes"
    },

    "step_5_add_colors_nord": {
      "order": 5,
      "file": "constants/theme.ts",
      "task": "Add 8 new colors to nord theme (light and dark)",
      "theme": "nord",
      "light_colors": {
        "elevatedSurface": "#ffffff",
        "overlay": "rgba(46, 52, 64, 0.4)",
        "hover": "#dde3eb",
        "pressed": "#cbd5e1",
        "disabled": "#aeb6c3",
        "highlight": "#dbe9f5",
        "linkColor": "#5e81ac",
        "accentSecondary": "#81a1c1"
      },
      "dark_colors": {
        "elevatedSurface": "#434c5e",
        "overlay": "rgba(0, 0, 0, 0.7)",
        "hover": "#454d60",
        "pressed": "#3a4150",
        "disabled": "#6b7689",
        "highlight": "#4c566a",
        "linkColor": "#88c0d0",
        "accentSecondary": "#81a1c1"
      },
      "verification": "Nord theme compiles without errors",
      "estimated_time": "10 minutes"
    },

    "step_6_add_colors_bearRedGraphite": {
      "order": 6,
      "file": "constants/theme.ts",
      "task": "Add 8 new colors to bearRedGraphite theme (light and dark)",
      "theme": "bearRedGraphite",
      "light_colors": {
        "elevatedSurface": "#f2f2f0",
        "overlay": "rgba(29, 29, 29, 0.4)",
        "hover": "#f0efed",
        "pressed": "#e0dfdd",
        "disabled": "#bcbcbc",
        "highlight": "#ffe4e3",
        "linkColor": "#d4534f",
        "accentSecondary": "#f0807c"
      },
      "dark_colors": {
        "elevatedSurface": "#333333",
        "overlay": "rgba(0, 0, 0, 0.7)",
        "hover": "#363636",
        "pressed": "#2c2c2c",
        "disabled": "#666666",
        "highlight": "#3f2a2a",
        "linkColor": "#d4534f",
        "accentSecondary": "#a63a36"
      },
      "verification": "bearRedGraphite theme compiles without errors",
      "estimated_time": "10 minutes"
    },

    "step_7_typescript_verification": {
      "order": 7,
      "task": "Run TypeScript compilation check",
      "command": "npx tsc --noEmit",
      "expected_result": "0 errors (ignoring pre-existing CSS string errors)",
      "verification": "Check no new errors in constants/theme.ts",
      "estimated_time": "2 minutes"
    },

    "step_8_optional_component_updates": {
      "order": 8,
      "task": "Optional: Update example components to use new colors",
      "optional": true,
      "examples": [
        {
          "component": "Button hover states",
          "file": "components/*.tsx (find buttons)",
          "change": "Add hover: colors.hover, pressed: colors.pressed"
        },
        {
          "component": "Modal overlays",
          "file": "components/theme-picker-modal.tsx",
          "change": "Add overlay background: colors.overlay"
        },
        {
          "component": "Disabled states",
          "file": "components/*.tsx (find disabled buttons/inputs)",
          "change": "Use colors.disabled for disabled elements"
        }
      ],
      "note": "Existing components continue to work without changes. Updates are for demonstration only.",
      "estimated_time": "30-60 minutes (optional)"
    },

    "step_9_update_changelog": {
      "order": 9,
      "file": "CHANGELOG.md",
      "task": "Document Phase 2 completion",
      "section": "## [Unreleased] > ### Added",
      "content": "- **17-Color Theme System** (Phase 2 of Theme Expansion)\n  - Expanded from 9 to 17 colors per theme for richer UI design\n  - Added elevatedSurface for layered UI elements (modals, popovers)\n  - Added overlay for semi-transparent modal backdrops\n  - Added hover and pressed states for interactive elements\n  - Added disabled state for non-interactive elements\n  - Added highlight color for selections and notifications\n  - Added linkColor for hyperlinks (distinct from buttons)\n  - Added accentSecondary for visual variety\n  - All 5 themes updated with full 17-color palettes\n  - Backward compatible: existing components work unchanged",
      "verification": "CHANGELOG.md contains Phase 2 documentation",
      "estimated_time": "10 minutes"
    },

    "step_10_git_commit": {
      "order": 10,
      "task": "Create git commit for Phase 2",
      "files_to_stage": [
        "constants/theme.ts",
        "CHANGELOG.md"
      ],
      "commit_message": "Expand theme system to 17-color palette (Phase 2)\n\nExpanded ColorScheme from 9 to 17 fields for richer UI design:\n\nNew Colors Added (8):\n- elevatedSurface: Layered UI elements (modals, popovers)\n- overlay: Semi-transparent modal backdrops\n- hover: Interactive hover states\n- pressed: Active/pressed button states\n- disabled: Disabled UI elements\n- highlight: Selections, search results, notifications\n- linkColor: Hyperlinks (can differ from tint)\n- accentSecondary: Secondary accent for variety\n\nAll 5 Themes Updated:\n- greyscale: Professional monochrome with blue links\n- appleNotes: Apple-inspired with system blue accents\n- sepia: Warm earth tones throughout\n- nord: Arctic blues with frost accents\n- bearRedGraphite: Bold red with coral secondary\n\nTechnical:\n- 100% backward compatible (all existing colors preserved)\n- All colors manually selected for theme harmony\n- All themes designed to meet WCAG AA contrast standards\n\nPhase 2 of 3-phase theme expansion\n\n🤖 Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>",
      "verification": "Git log shows commit with Phase 2 changes",
      "estimated_time": "5 minutes"
    },

    "step_11_manual_testing": {
      "order": 11,
      "task": "Manual testing in app",
      "tests": [
        "Switch to each theme (greyscale, appleNotes, sepia, nord, bearRedGraphite)",
        "Toggle light/dark mode for each theme",
        "Verify theme picker modal still works",
        "Check that all UI elements render correctly",
        "Verify no console errors or warnings",
        "Confirm theme persistence across app restarts"
      ],
      "verification": "All 5 themes work in both light and dark modes",
      "estimated_time": "15 minutes"
    }
  },

  "color_definitions_reference": {
    "greyscale": {
      "philosophy": "Professional monochrome with traditional blue links",
      "light_additions": {
        "elevatedSurface": "#f2f2f0 // Slightly off-white for modals",
        "overlay": "rgba(18, 18, 18, 0.5) // Semi-dark backdrop",
        "hover": "#ececec // Subtle gray hover",
        "pressed": "#e0e0e0 // Pressed gray",
        "disabled": "#bcbcbc // Low contrast gray",
        "highlight": "#ffeb3b // Yellow for selections",
        "linkColor": "#0066cc // Traditional web blue",
        "accentSecondary": "#6a6a6a // Secondary gray"
      },
      "dark_additions": {
        "elevatedSurface": "#2a2a2a // Lighter than surface",
        "overlay": "rgba(0, 0, 0, 0.7) // Dark backdrop",
        "hover": "#1a1a1a // Subtle lighter hover",
        "pressed": "#0d0d0d // Darker pressed",
        "disabled": "#666666 // Mid gray",
        "highlight": "#ffeb3b // Same yellow in dark",
        "linkColor": "#5eb3ff // Brighter blue for dark bg",
        "accentSecondary": "#b0b0b0 // Lighter secondary"
      }
    },
    "appleNotes": {
      "philosophy": "Apple system colors with iOS blue accents",
      "source": "iOS Human Interface Guidelines"
    },
    "sepia": {
      "philosophy": "Warm earth tones throughout, no blues"
    },
    "nord": {
      "philosophy": "Arctic color palette, frost blues and polar nights",
      "source": "https://www.nordtheme.com/"
    },
    "bearRedGraphite": {
      "philosophy": "Bold red accent on neutral graphite, coral secondary"
    }
  },

  "success_criteria": {
    "technical": [
      "All 5 themes have 17 colors defined (light and dark)",
      "TypeScript compiles with 0 new errors",
      "No breaking changes to existing code"
    ],
    "functional": [
      "All themes render correctly in app",
      "Theme switching works for all 5 themes",
      "Light/dark toggle works for all themes",
      "Theme persistence works across restarts",
      "Theme picker modal displays all themes correctly"
    ],
    "accessibility": [
      "All text/background pairs visually readable",
      "linkColor visually distinct and readable",
      "disabled states have reduced contrast",
      "highlight maintains readability"
    ],
    "documentation": [
      "CHANGELOG.md updated with Phase 2 details",
      "Git commit with descriptive message",
      "All new color fields documented in this plan"
    ]
  },

  "rollback_plan": {
    "if_issues_found": "Git revert to commit before Phase 2",
    "restore_command": "git revert HEAD",
    "safety": "No data loss - all original colors preserved in git history",
    "alternative": "Make new color fields optional (ColorScheme interface) and provide fallbacks"
  },

  "future_phases": {
    "phase_3_metadata_and_validation": {
      "status": "Planned in WORKING-PLAN.json",
      "features": [
        "Enhanced metadata (mood, usageNotes, contrastRatios)",
        "Optional: Automated validation (npm run validate-themes)",
        "Optional: Accessibility testing (color blindness simulation)"
      ],
      "depends_on": "Phase 2 complete"
    }
  },

  "estimated_totals": {
    "time": "3-4 hours (including testing)",
    "lines_added": "~90 lines (80 color values + interface update + documentation)",
    "files_new": 0,
    "files_modified": 2,
    "bundle_size_increase": "0KB",
    "breaking_changes": 0
  }
}
