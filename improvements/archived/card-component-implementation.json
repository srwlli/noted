{
  "title": "Universal Card Component Implementation",
  "dateCreated": "2025-10-02",
  "status": "ready-to-implement",
  "priority": "high",

  "objective": {
    "goal": "Create single universal card component that ensures pixel-perfect consistency across all card types",
    "baseline": "Info card structure (components/info-cards/*.tsx) becomes the standard",
    "scope": "Apply to info cards and note cards. Settings page will be refactored separately.",
    "outcome": "All cards have identical sizing, spacing, borders, and structure"
  },

  "requirements": {
    "singleCardSize": "One universal card size for entire app",
    "baselineSource": "app/(tabs)/info.tsx accordion cards",
    "headerBorder": "Header must have bottom border (like note-item.tsx titleRow when expanded)",
    "consistency": "No variations in border, padding, radius, or overflow between card types"
  },

  "cardSpecification": {
    "container": {
      "borderWidth": 1,
      "borderRadius": 12,
      "marginBottom": 12,
      "overflow": "hidden",
      "backgroundColor": "colors.surface",
      "borderColor": "colors.border"
    },
    "header": {
      "padding": 16,
      "borderBottomWidth": 1,
      "borderBottomColor": "colors.border",
      "note": "Header always has bottom border for visual separation"
    },
    "content": {
      "padding": 16,
      "borderTopWidth": 0,
      "note": "Content padding is separate from header, no additional top border needed since header has bottom border"
    }
  },

  "implementationPlan": {
    "phase1": {
      "name": "Create Universal Card Component",
      "tasks": [
        {
          "id": "1.1",
          "task": "Create components/common/card.tsx",
          "status": "pending",
          "details": [
            "Base card component with container, header, and content sections",
            "Props: isAccordion (boolean), isExpanded (boolean), onToggle (function), headerContent (ReactNode), children (ReactNode)",
            "Container: borderWidth: 1, borderRadius: 12, marginBottom: 12, overflow: 'hidden'",
            "Header: padding: 16, borderBottomWidth: 1, clickable if accordion",
            "Content: padding: 16, conditionally rendered if accordion"
          ],
          "acceptance": [
            "Component exports Card with correct props interface",
            "Container has exact styles from spec",
            "Header always visible with bottom border",
            "Content shows/hides based on isAccordion and isExpanded",
            "Theme colors applied correctly"
          ]
        },
        {
          "id": "1.2",
          "task": "Add TypeScript interfaces",
          "status": "pending",
          "details": [
            "CardProps interface with all required props",
            "Optional props for customization (headerContent, children)",
            "Boolean flags for accordion behavior"
          ],
          "acceptance": [
            "TypeScript compiles without errors",
            "Props are properly typed",
            "JSDoc comments explain usage"
          ]
        },
        {
          "id": "1.3",
          "task": "Test Card component in isolation",
          "status": "pending",
          "details": [
            "Create test instance with accordion mode",
            "Create test instance with static mode",
            "Verify padding, borders, and spacing"
          ],
          "acceptance": [
            "Card renders correctly in accordion mode",
            "Card renders correctly in static mode",
            "No console errors or warnings"
          ]
        }
      ]
    },

    "phase2": {
      "name": "Migrate Info Cards to Universal Card",
      "tasks": [
        {
          "id": "2.1",
          "task": "Update download-card.tsx",
          "status": "pending",
          "details": [
            "Import Card from components/common/card",
            "Replace outer View with Card wrapper",
            "Move chevron + title into headerContent prop",
            "Move tab content into children prop",
            "Remove local card/header/content styles (use Card's styles)",
            "Keep download-specific styles (tabs, buttons, etc.)"
          ],
          "acceptance": [
            "Card displays with correct structure",
            "Accordion expand/collapse works",
            "Tabs and content render correctly",
            "Visual appearance matches original"
          ]
        },
        {
          "id": "2.2",
          "task": "Update quick-start-card.tsx",
          "status": "pending",
          "details": [
            "Import Card wrapper",
            "Replace structure with Card component",
            "Move header into headerContent",
            "Move sections into children",
            "Remove duplicate card/header/content styles",
            "Keep icon list and action-specific styles"
          ],
          "acceptance": [
            "Card structure matches universal standard",
            "Icon sections display correctly",
            "Dividers between sections work",
            "Accordion behavior intact"
          ]
        },
        {
          "id": "2.3",
          "task": "Update tech-stack-card.tsx",
          "status": "pending",
          "details": [
            "Import Card wrapper",
            "Use Card for structure",
            "Header: chevron + 'Tech Stack' title",
            "Children: tech sections with dividers",
            "Remove card/header/content base styles"
          ],
          "acceptance": [
            "Tech sections render correctly",
            "Dividers between categories work",
            "Card matches universal sizing"
          ]
        },
        {
          "id": "2.4",
          "task": "Update coming-soon-card.tsx",
          "status": "pending",
          "details": [
            "Import Card wrapper",
            "Wrap with Card component",
            "Header: chevron + 'Coming Soon' title",
            "Children: feature list",
            "Remove base card styles"
          ],
          "acceptance": [
            "Feature list displays correctly",
            "Card structure consistent with others"
          ]
        },
        {
          "id": "2.5",
          "task": "Update contact-card.tsx",
          "status": "pending",
          "details": [
            "Import Card wrapper",
            "Use Card for structure",
            "Header: chevron + 'Contact' title",
            "Children: email button and description",
            "Remove base styles"
          ],
          "acceptance": [
            "Email button works correctly",
            "Card matches universal structure"
          ]
        },
        {
          "id": "2.6",
          "task": "Verify all info cards visually",
          "status": "pending",
          "details": [
            "Open app/(tabs)/info.tsx",
            "Expand/collapse each card",
            "Verify borders, padding, spacing identical",
            "Check header bottom border on all cards",
            "Verify theme colors applied correctly"
          ],
          "acceptance": [
            "All info cards have identical structure",
            "Headers align perfectly",
            "Content padding consistent",
            "No visual discrepancies"
          ]
        }
      ]
    },

    "phase3": {
      "name": "Refactor Note Cards to Use Universal Card",
      "tasks": [
        {
          "id": "3.1",
          "task": "Analyze note-item.tsx current structure",
          "status": "pending",
          "details": [
            "Document current padding structure (container has padding: 16)",
            "Identify titleRow as 'header' equivalent",
            "Identify preview content as 'content' equivalent",
            "Note special behaviors: chevron button, menu button, independent expansion"
          ],
          "acceptance": [
            "Clear understanding of current structure",
            "Identified mapping to Card component sections"
          ]
        },
        {
          "id": "3.2",
          "task": "Refactor note-item.tsx to use Card wrapper",
          "status": "pending",
          "details": [
            "Import Card from components/common/card",
            "Remove container styles (padding: 16, border, radius)",
            "Wrap with Card component (isAccordion: false - note manages own state)",
            "Create header section: chevron button + title + menu button",
            "Pass header as headerContent prop to Card",
            "Move preview content into children prop",
            "Keep note-specific styles: chevronButton, iconButton, title, preview",
            "Maintain isExpanded state management (independent, not parent-controlled)",
            "Keep menu open state (selectedSurface background)"
          ],
          "acceptance": [
            "Note card uses Card wrapper",
            "Header contains chevron + title + menu",
            "Header has bottom border (from Card)",
            "Content section has padding: 16 (from Card)",
            "Expand/collapse works independently",
            "Menu button opens correctly",
            "Visual height matches info cards exactly"
          ]
        },
        {
          "id": "3.3",
          "task": "Test note card behavior",
          "status": "pending",
          "details": [
            "Test expand/collapse with chevron button",
            "Test menu button opens action menu",
            "Test multiple notes can expand simultaneously",
            "Test menu open shows selectedSurface background",
            "Verify content renders when expanded"
          ],
          "acceptance": [
            "All note card functionality works",
            "No regressions in behavior",
            "Visual appearance consistent with info cards"
          ]
        },
        {
          "id": "3.4",
          "task": "Compare note cards with info cards visually",
          "status": "pending",
          "details": [
            "Open notes page, then info page",
            "Compare collapsed card heights",
            "Compare header padding and alignment",
            "Compare border thickness and radius",
            "Verify bottom border on headers"
          ],
          "acceptance": [
            "Note cards and info cards are visually identical in size",
            "Headers align perfectly",
            "Borders and padding match exactly",
            "No visual discrepancies"
          ]
        }
      ]
    },

    "phase4": {
      "name": "Final Verification & Documentation",
      "tasks": [
        {
          "id": "4.1",
          "task": "Cross-platform testing",
          "status": "pending",
          "details": [
            "Test on Web (PWA)",
            "Test on iOS simulator/device",
            "Test on Android emulator/device",
            "Verify cards render identically on all platforms"
          ],
          "acceptance": [
            "Cards work on web",
            "Cards work on iOS",
            "Cards work on Android",
            "No platform-specific issues"
          ]
        },
        {
          "id": "4.2",
          "task": "Theme compatibility check",
          "status": "pending",
          "details": [
            "Test with light mode",
            "Test with dark mode",
            "Cycle through all 10 themes",
            "Verify borders and backgrounds use correct theme colors"
          ],
          "acceptance": [
            "Cards work in light mode",
            "Cards work in dark mode",
            "All themes display correctly",
            "Header borders visible in all themes"
          ]
        },
        {
          "id": "4.3",
          "task": "Update card-size-standards.json status",
          "status": "pending",
          "details": [
            "Mark issue as 'resolved'",
            "Document solution implemented (Option 3: Universal Card wrapper)",
            "Add implementation date",
            "Reference Card component location"
          ],
          "acceptance": [
            "JSON file updated with resolution",
            "Implementation details documented"
          ]
        },
        {
          "id": "4.4",
          "task": "Update CHANGELOG.md",
          "status": "pending",
          "details": [
            "Add entry under ### Changed section",
            "Document universal card component creation",
            "Note improved visual consistency",
            "Mention refactor of info cards and note cards"
          ],
          "acceptance": [
            "CHANGELOG updated",
            "Clear description of changes"
          ]
        },
        {
          "id": "4.5",
          "task": "Git commit and push",
          "status": "pending",
          "details": [
            "Stage all modified files",
            "Commit with descriptive message",
            "Push to remote repository"
          ],
          "acceptance": [
            "Changes committed",
            "Pushed to remote successfully"
          ]
        }
      ]
    }
  },

  "componentAPI": {
    "file": "components/common/card.tsx",
    "interface": {
      "CardProps": {
        "isAccordion": {
          "type": "boolean",
          "required": false,
          "default": true,
          "description": "If true, content shows/hides. If false, content always visible."
        },
        "isExpanded": {
          "type": "boolean",
          "required": false,
          "default": false,
          "description": "Controls content visibility (only used if isAccordion is true)"
        },
        "onToggle": {
          "type": "() => void",
          "required": false,
          "description": "Called when header is tapped (only used if isAccordion is true)"
        },
        "headerContent": {
          "type": "ReactNode",
          "required": true,
          "description": "Content to display in header section (e.g., title, chevron, buttons)"
        },
        "children": {
          "type": "ReactNode",
          "required": true,
          "description": "Content to display in body section"
        },
        "style": {
          "type": "ViewStyle",
          "required": false,
          "description": "Optional custom styles for container (use sparingly)"
        }
      }
    },
    "usage": {
      "accordionCard": "// Info page cards\n<Card\n  isAccordion={true}\n  isExpanded={isExpanded}\n  onToggle={onToggle}\n  headerContent={\n    <>\n      <MaterialIcons name=\"chevron-right\" />\n      <Text>Title</Text>\n    </>\n  }\n>\n  <Text>Card content goes here</Text>\n</Card>",
      "staticCard": "// Settings page cards (future)\n<Card\n  isAccordion={false}\n  headerContent={<Text>Settings Section</Text>}\n>\n  <View>Settings content always visible</View>\n</Card>",
      "noteCard": "// Note cards - manually control expansion\n<Card\n  isAccordion={false} // Note manages its own state\n  headerContent={\n    <>\n      <TouchableOpacity onPress={handleToggle}>\n        <MaterialIcons name=\"chevron-right\" />\n      </TouchableOpacity>\n      <Text>{note.title}</Text>\n      <Menu>...</Menu>\n    </>\n  }\n>\n  {isExpanded && <Text>{note.content}</Text>}\n</Card>"
    }
  },

  "technicalNotes": {
    "headerBorder": {
      "requirement": "Header must always have bottom border",
      "implementation": "borderBottomWidth: 1 in header styles",
      "reasoning": "Provides visual separation between header and content, matches note-item.tsx behavior when expanded"
    },
    "paddingStructure": {
      "container": "No padding (border only)",
      "header": "padding: 16 (all sides)",
      "content": "padding: 16 (all sides)",
      "rationale": "Section-based padding ensures consistent spacing and allows header border to extend full width"
    },
    "overflow": {
      "value": "hidden",
      "reasoning": "Ensures border-radius clips child content cleanly"
    },
    "noteCardSpecialCase": {
      "difference": "Note cards manage their own expansion state (not parent-controlled)",
      "solution": "Use isAccordion={false} and manually control content visibility with local state",
      "benefit": "Multiple notes can be expanded simultaneously, unlike info cards (single expansion)"
    }
  },

  "filesAffected": {
    "new": [
      "components/common/card.tsx"
    ],
    "modified": [
      "components/info-cards/download-card.tsx",
      "components/info-cards/quick-start-card.tsx",
      "components/info-cards/tech-stack-card.tsx",
      "components/info-cards/coming-soon-card.tsx",
      "components/info-cards/contact-card.tsx",
      "components/note-item.tsx",
      "CHANGELOG.md",
      "improvements/refactor/card-size-standards.json"
    ],
    "unchanged": [
      "app/(tabs)/info.tsx - Only imports change",
      "app/(tabs)/notes.tsx - No changes needed",
      "services/notes.ts - No changes needed"
    ]
  },

  "rollbackPlan": {
    "if": "Visual issues or functionality breaks",
    "steps": [
      "Git revert to commit before Card component creation",
      "All cards revert to inline structure",
      "No data loss (no database changes)"
    ],
    "risk": "Low - purely visual/structural change"
  },

  "futureWork": {
    "settingsPageRefactor": {
      "when": "After this implementation is stable",
      "approach": "Use same Card component with isAccordion={false}",
      "benefit": "Settings cards will automatically match info/note card sizing"
    },
    "folderCards": {
      "when": "If folder UI needs card display",
      "approach": "Use Card component",
      "benefit": "Instant visual consistency"
    }
  },

  "successCriteria": {
    "visual": [
      "All cards have identical heights when displaying similar content",
      "Headers align perfectly across all cards",
      "Borders, padding, and spacing are pixel-perfect consistent",
      "Header bottom border visible on all cards"
    ],
    "functional": [
      "Info card accordion behavior works",
      "Note card expand/collapse works independently",
      "Menu buttons work on note cards",
      "No regressions in existing functionality"
    ],
    "code": [
      "No duplicate card styling code",
      "Single source of truth for card structure",
      "TypeScript types correct",
      "No console errors or warnings"
    ]
  },

  "estimatedDuration": "4-6 hours",

  "references": {
    "originalIssue": "improvements/refactor/card-size-standards.json",
    "baselineComponent": "components/info-cards/tech-stack-card.tsx (representative info card)",
    "comparison": "components/note-item.tsx (current note card structure)"
  }
}
